**Оглавление**

- [Использование логирования](#usage)
- [Настройка и конфигурация](#config)
- [Фатальные и критичные ошибки](#fatal)

<- [к оглавлению](main.md)

---

### Логирование

Regenix использует свою реализацию логирования. По-умолчанию все
логи сохраняются в папке проекта `/logs/`. Они могут делиться на
несколько групп по степени своей важности, а также могут логироваться
все в один файл `system.log`.


#### Использование логирования <a name="usage"></a>

Для того чтобы добавить сообщение в лог используйте статичные методы класса Logger.
У логгера есть несколько типов сообщения:

- `fatal` - фатальные ошибки
- `error` - любые ошибки
- `warn` - предупреждения
- `info` - информационные сообщения
- `debug` - сообщения для отладки

По-умолчанию Regenix пишет каждый тип собщения в отдельный файл с соответствующим названием,
но при этом хранит и общий файл всех сообщений. Это все можно отключать/включать в конфигурации
приложения.

Используя класс Logger можно добавлять сообщения в логи:

    Logger::debug('Start testing');
    Logger::info('Load %s module', $module);
    Logger::warn('Can`t use %s class', $class);
    ..

Как видите в сообщения можно передавать параметры, это соответствует поведению функции `sprintf`.


#### Настройка и конфигурация <a name="config"></a>

Настройки логера находятся в файле `/conf/application.conf`, все опции логера начинаются
с префикса `logger.`. Для того чтобы включить или отключить логирование используйте bool опцию `logger.enable`,
по-умолчанию оно включено.

Для того чтобы включить дополнительное логирование сообщений по разным файлам, используйте
опцию bool `logger.division`, по-умолчанию оно включено.

    # if on logger will write fatal.log, error.log, info.log etc.
    logger.division = on

При включенной опции сообщения info будут доблироваться в файл `info.log`, warn -> `warn.info` и т.д.


Для того чтобы установить минимальный уровень логирования, используйте опцию `logger.level`. Чем
выше важность сообщения тем вышего его приоритет (`fatal` самое важное, а `debug` наоборот).

    # base logger level - fatal, error, warn, info, debug
    logger.level = error

Используйте префикс `dev.` чтобы применить другую конфигурацию для режима `dev` разработки.

    # logger level for dev mode
    dev.logger.level = info


#### Фатальные и критичные ошибки <a name="fatal"></a>

В php приложениях часто могут возникать фатальные и критичные ошибки, например как `Parse Error` или
`Fatal Error`. Эти ошибки иного трудно уловимы. Regenix умеет логировать такие критичные ошибки
в отдельный файл `fatal.log`. Опция логирования фатальных ошибок по-умолчанию включена для
prod режима и отключена для dev режима (т.к. в нем они отображаются в браузере). Но эти
настройки можно изменить:

Чтобы включить/отключить логирование фатальных ошибок используйте bool опцию `logger.fatal.enable`.

    # enable fatal error logging out log/fatal.log
    # parse, compile, fatal system errors
    logger.fatal.enable = on

Для того чтобы задать опцию только для `dev` режима используйте соответствующий префикс:

    # only for dev
    dev.logger.fatal.enable = off
